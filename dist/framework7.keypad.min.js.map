{"version":3,"sources":["framework7.keypad.js"],"names":["global","factory","exports","module","define","amd","Framework7Keypad","this","Keypad","name","install","Framework7Class","app","params","call","Utils","utils","$","request","keypad","$containerEl","$inputEl","view","defaults","extend","on","containerEl","length","buttons","ref","dotCharacter","dotButton","type","html","value","undefined","dark","cssClass","onInputClick","open","onInputFocus","e","preventDefault","onHtmlClick","$targetEl","target","isPopover","opened","closest","close","inputEl","parents","f7View","views","get","main","inline","initialized","url","calcValues","calcOperations","lastWasNumber","attachInputEvents","inputReadOnly","detachInputEvents","off","attachHtmlEvents","detachHtmlEvents","attachKeypadEvents","$buttonsEl","$el","find","dragging","handleClick","$buttonEl","hasClass","button","index","buttonValue","currentValue","substring","indexOf","setValue","calculator","removeClass","addClass","emit","onClick","detachKeypadEvents","f7Keypad","init","__proto__","prototype","Object","create","constructor","initInput","prop","modal","openIn","device","ios","ipad","width","operators","split","calc","toEval","i","operation","toString","replace","eval","window","percents","lastOperation","pop","val1","val2","push","formatValue","updateValue","getValue","newValue","valueMaxLength","val","trigger","renderButtons","buttonClass","buttonsHTML","renderToolbar","trim","renderSheet","toolbar","renderPopover","renderInline","render","modalType","onOpen","theme","onOpened","onClose","onClosed","nextTick","el","destroy","routableModals","obj","append","modalContent","modalParams","targetEl","scrollToEl","scrollToInput","content","backdrop","closed","router","navigate","route","path","closeByOutsideClick","destroyed","deleteProps","KeypadClassConstructor","Class","onlyInPopover","toolbarCloseText","instance","pageInit","page","each","attr","dataset","pageBeforeRemove"],"mappings":"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","file":"framework7.keypad.min.js","sourcesContent":["/**\n * Framework7 Plugin Keypad 2.0.0\n * Keypad plugin extends Framework7 with additional custom keyboards\n * http://framework7.io/plugins/\n *\n * Copyright 2014-2019 [object Object]\n *\n * Released under the MIT License\n *\n * Released on: December 6, 2019\n */\n\n(function (global, factory) {\n\ttypeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n\ttypeof define === 'function' && define.amd ? define(factory) :\n\t(global.Framework7Keypad = factory());\n}(this, (function () { 'use strict';\n\nvar KeypadClassConstructor = function (Framework7Class) {\n  return /*@__PURE__*/(function (Framework7Class) {\n    function Keypad(app, params) {\n      Framework7Class.call(this, params, [app]);\n\n      var Utils = app.utils;\n      var $ = app.$;\n      var request = app.request;\n\n      var keypad = this;\n      keypad.app = app;\n\n      var defaults = Utils.extend({\n        on: {},\n      }, app.params.keypad);\n\n      keypad.params = Utils.extend(defaults, params);\n\n      var $containerEl;\n\n      if (keypad.params.containerEl) {\n        $containerEl = $(keypad.params.containerEl);\n        if ($containerEl.length === 0) { return keypad; }\n      }\n\n      if (!keypad.params.buttons || keypad.params.buttons.length === 0) {\n        var ref = keypad.params;\n        var dotCharacter = ref.dotCharacter;\n        var dotButton = ref.dotButton;\n        if (keypad.params.type === 'numpad') {\n          keypad.params.buttons = [\n            {\n              html: '<span class=\"keypad-button-number\">1</span><span class=\"keypad-button-letters\"></span>',\n              value: 1,\n            },\n            {\n              html: '<span class=\"keypad-button-number\">2</span><span class=\"keypad-button-letters\">ABC</span>',\n              value: 2,\n            },\n            {\n              html: '<span class=\"keypad-button-number\">3</span><span class=\"keypad-button-letters\">DEF</span>',\n              value: 3,\n            },\n            {\n              html: '<span class=\"keypad-button-number\">4</span><span class=\"keypad-button-letters\">GHI</span>',\n              value: 4,\n            },\n            {\n              html: '<span class=\"keypad-button-number\">5</span><span class=\"keypad-button-letters\">JKL</span>',\n              value: 5,\n            },\n            {\n              html: '<span class=\"keypad-button-number\">6</span><span class=\"keypad-button-letters\">MNO</span>',\n              value: 6,\n            },\n            {\n              html: '<span class=\"keypad-button-number\">7</span><span class=\"keypad-button-letters\">PQRS</span>',\n              value: 7,\n            },\n            {\n              html: '<span class=\"keypad-button-number\">8</span><span class=\"keypad-button-letters\">TUV</span>',\n              value: 8,\n            },\n            {\n              html: '<span class=\"keypad-button-number\">9</span><span class=\"keypad-button-letters\">WXYZ</span>',\n              value: 9,\n            },\n            {\n              html: dotButton ? (\"<span class=\\\"keypad-button-number\\\">\" + dotCharacter + \"</span>\") : '',\n              value: dotButton ? dotCharacter : undefined,\n              dark: true,\n              cssClass: dotButton ? '' : 'keypad-dummy-button',\n            },\n            {\n              html: '<span class=\"keypad-button-number\">0</span>',\n              value: 0,\n            },\n            {\n              html: '<i class=\"icon icon-keypad-delete\"></i>',\n              cssClass: 'keypad-delete-button',\n              dark: true,\n            } ];\n        } else if (params.type === 'calculator') {\n          keypad.params.buttons = [\n            {\n              html: '<span class=\"keypad-button-number\">C</span>',\n              value: 'C',\n              dark: true,\n            },\n            {\n              html: '<span class=\"keypad-button-number\">±</span>',\n              value: '±',\n              dark: true,\n            },\n            {\n              html: '<span class=\"keypad-button-number\">%</span>',\n              value: '%',\n              dark: true,\n            },\n            {\n              html: '<span class=\"keypad-button-number\">÷</span>',\n              value: '÷',\n              cssClass: 'calc-operator-button',\n\n            },\n            {\n              html: '<span class=\"keypad-button-number\">7</span>',\n              value: 7,\n            },\n            {\n              html: '<span class=\"keypad-button-number\">8</span>',\n              value: 8,\n            },\n            {\n              html: '<span class=\"keypad-button-number\">9</span>',\n              value: 9,\n            },\n            {\n              html: '<span class=\"keypad-button-number\">×</span>',\n              value: '×',\n              cssClass: 'calc-operator-button',\n            },\n            {\n              html: '<span class=\"keypad-button-number\">4</span>',\n              value: 4,\n            },\n            {\n              html: '<span class=\"keypad-button-number\">5</span>',\n              value: 5,\n            },\n            {\n              html: '<span class=\"keypad-button-number\">6</span>',\n              value: 6,\n            },\n            {\n              html: '<span class=\"keypad-button-number\">-</span>',\n              value: '-',\n              cssClass: 'calc-operator-button',\n            },\n            {\n              html: '<span class=\"keypad-button-number\">1</span>',\n              value: 1,\n            },\n            {\n              html: '<span class=\"keypad-button-number\">2</span>',\n              value: 2,\n            },\n            {\n              html: '<span class=\"keypad-button-number\">3</span>',\n              value: 3,\n            },\n            {\n              html: '<span class=\"keypad-button-number\">+</span>',\n              value: '+',\n              cssClass: 'calc-operator-button',\n            },\n            {\n              html: '<span class=\"keypad-button-number\">0</span>',\n              value: 0,\n              cssClass: 'keypad-button-double',\n            },\n            {\n              html: '<span class=\"keypad-button-number\">.</span>',\n              value: dotCharacter,\n            },\n            {\n              html: '<span class=\"keypad-button-number\">=</span>',\n              value: '=',\n              cssClass: 'calc-operator-button calc-operator-button-equal',\n            } ];\n        }\n      }\n\n      var $inputEl;\n      if (keypad.params.inputEl) {\n        $inputEl = $(keypad.params.inputEl);\n      }\n\n      var view;\n      if (keypad.params.view) {\n        view = keypad.params.view;\n      } else if ($inputEl && $inputEl.length) {\n        view = $inputEl.parents('.view').length && $inputEl.parents('.view')[0].f7View;\n      } else {\n        view = app.views.get($inputEl);\n      }\n      if (!view) { view = app.views.main; }\n\n      Utils.extend(keypad, {\n        app: app,\n        request: request,\n        $containerEl: $containerEl,\n        containerEl: $containerEl && $containerEl[0],\n        inline: $containerEl && $containerEl.length > 0,\n        $inputEl: $inputEl,\n        inputEl: $inputEl && $inputEl[0],\n        initialized: false,\n        opened: false,\n        view: view,\n        url: keypad.params.url,\n        calcValues: [],\n        calcOperations: [],\n        lastWasNumber: false,\n      });\n\n      // Events\n      function onInputClick() {\n        keypad.open();\n      }\n      function onInputFocus(e) {\n        e.preventDefault();\n      }\n      function onHtmlClick(e) {\n        var $targetEl = $(e.target);\n        if (keypad.isPopover()) { return; }\n        if (!keypad.opened) { return; }\n        if ($targetEl.closest('[class*=\"backdrop\"]').length) { return; }\n        if ($inputEl && $inputEl.length > 0) {\n          if ($targetEl[0] !== $inputEl[0] && $targetEl.closest('.sheet-modal, .keypad-modal').length === 0) {\n            keypad.close();\n          }\n        } else if ($(e.target).closest('.sheet-modal, .keypad-modal').length === 0) {\n          keypad.close();\n        }\n      }\n      Utils.extend(keypad, {\n        attachInputEvents: function attachInputEvents() {\n          keypad.$inputEl.on('touchend click', onInputClick);\n          if (keypad.params.inputReadOnly) {\n            keypad.$inputEl.on('focus mousedown', onInputFocus);\n          }\n        },\n        detachInputEvents: function detachInputEvents() {\n          keypad.$inputEl.off('touchend click', onInputClick);\n          if (keypad.params.inputReadOnly) {\n            keypad.$inputEl.off('focus mousedown', onInputFocus);\n          }\n        },\n        attachHtmlEvents: function attachHtmlEvents() {\n          app.on('touchend click', onHtmlClick);\n        },\n        detachHtmlEvents: function detachHtmlEvents() {\n          app.off('touchend click', onHtmlClick);\n        },\n      });\n\n\n      keypad.attachKeypadEvents = function attachKeypadEvents() {\n        var $buttonsEl = keypad.$el.find('.keypad-buttons');\n        var dragging = false;\n        function handleTouchStart() {\n          dragging = false;\n        }\n        function handleTouchMove() {\n          dragging = true;\n        }\n        function handleClick(e) {\n          if (e.type === 'touchend') {\n            $(this).off('click');\n            if (dragging) {\n              return;\n            }\n          }\n          var $buttonEl = $(e.target);\n          if (!$buttonEl.hasClass('keypad-button')) {\n            $buttonEl = $buttonEl.parents('.keypad-button');\n          }\n          if ($buttonEl.length === 0) { return; }\n          var button = keypad.params.buttons[$buttonEl.index()];\n          var buttonValue = button.value;\n          var currentValue = keypad.value;\n\n          if (keypad.params.type === 'numpad') {\n            if (typeof currentValue === 'undefined') { currentValue = ''; }\n            if ($buttonEl.hasClass('keypad-delete-button')) {\n              currentValue = currentValue.substring(0, currentValue.length - 1);\n            } else if (typeof buttonValue !== 'undefined') {\n              if (buttonValue === '.' && currentValue.indexOf('.') >= 0) {\n                buttonValue = '';\n              }\n              currentValue += buttonValue;\n            }\n            if (typeof currentValue !== 'undefined') { keypad.setValue(currentValue); }\n          }\n          if (keypad.params.type === 'calculator') {\n            keypad.calculator(button.value);\n            $buttonsEl.find('.calc-operator-active').removeClass('calc-operator-active');\n            if ($buttonEl.hasClass('calc-operator-button') && !$buttonEl.hasClass('calc-operator-button-equal')) {\n              $buttonEl.addClass('calc-operator-active');\n            }\n          }\n          keypad.emit('local::buttonClick keypadButtonClick', keypad, button);\n          if (button.onClick) {\n            button.onClick(keypad, button);\n          }\n        }\n\n        $buttonsEl.on('touchstart', handleTouchStart);\n        $buttonsEl.on('touchmove', handleTouchMove);\n        $buttonsEl.on('touchend click', handleClick);\n\n        keypad.detachKeypadEvents = function detachKeypadEvents() {\n          $buttonsEl.off('touchstart touchmove touchend click', handleClick);\n        };\n      };\n\n      if ($inputEl && $inputEl.length) {\n        $inputEl[0].f7Keypad = Keypad;\n      }\n      if ($containerEl && $containerEl.length) {\n        $containerEl[0].f7Keypad = Keypad;\n      }\n\n      keypad.init();\n\n      return keypad;\n    }\n\n    if ( Framework7Class ) Keypad.__proto__ = Framework7Class;\n    Keypad.prototype = Object.create( Framework7Class && Framework7Class.prototype );\n    Keypad.prototype.constructor = Keypad;\n    Keypad.prototype.initInput = function initInput () {\n      var keypad = this;\n      if (!keypad.$inputEl) { return; }\n      if (keypad.params.inputReadOnly) { keypad.$inputEl.prop('readOnly', true); }\n    };\n    Keypad.prototype.isPopover = function isPopover () {\n      var keypad = this;\n      var app = keypad.app;\n      var modal = keypad.modal;\n      var params = keypad.params;\n      if (params.openIn === 'sheet') { return false; }\n      if (modal && modal.type !== 'popover') { return false; }\n\n      if (!keypad.inline && keypad.inputEl) {\n        if (params.openIn === 'popover') { return true; }\n        else if (app.device.ios) {\n          return !!app.device.ipad;\n        } else if (app.width >= 768) {\n          return true;\n        }\n      }\n      return false;\n    };\n    Keypad.prototype.calculator = function calculator (value) {\n      var keypad = this;\n      var operators = ('+ - = × ÷ ± %').split(' ');\n      var numbers = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, '.'];\n      var reset = 'C';\n      var invert = '±';\n      var perc = '%';\n      function calc() {\n        var toEval = '';\n        for (var i = 0; i < keypad.calcOperations.length; i += 1) {\n          var operation = keypad.calcOperations[i];\n          // eslint-disable-next-line\n          if (i === keypad.calcOperations.length - 1 && operators.indexOf(operation) >= 0) {\n\n          } else if (operation) {\n            if (operation === '.') {\n              operation = 0;\n            }\n            toEval += ((\"\" + (operation.toString())))\n              .replace('×', '*')\n              .replace('÷', '/');\n          }\n        }\n        toEval = toEval.replace(/--/g, '+');\n        // eslint-disable-next-line\n        keypad.setValue(eval.call(window, toEval));\n      }\n      if (!keypad.value) { keypad.value = 0; }\n      if (value === reset) {\n        keypad.setValue(0);\n        keypad.calcValues = [];\n        keypad.calcOperations = [];\n        return;\n      }\n      if (numbers.indexOf(value) >= 0) {\n        if (value === '.') {\n          if (keypad.lastWasNumber && keypad.value.toString().indexOf('.') >= 0) { return; }\n        }\n        if (operators.indexOf(keypad.calcValues[keypad.calcValues.length - 1]) >= 0) {\n          keypad.setValue(value);\n        } else {\n          keypad.setValue(keypad.value ? (\"\" + (keypad.value) + value) : value);\n        }\n        keypad.lastWasNumber = true;\n      }\n      if (operators.indexOf(value) >= 0) {\n        if (value === invert) {\n          if (keypad.value === '.') { return; }\n          keypad.setValue(-1 * keypad.value);\n          keypad.lastWasNumber = true;\n        } else if (value === perc) {\n          if (keypad.calcOperations[keypad.calcOperations.length - 2]) {\n            var percents = keypad.value / 100;\n            keypad.setValue(keypad.calcOperations[keypad.calcOperations.length - 2] * percents);\n          }\n          keypad.lastWasNumber = true;\n        } else {\n          var lastOperation = keypad.calcOperations[keypad.calcOperations.length - 1];\n          if (value === '=') {\n            if (keypad.calcOperations[keypad.calcOperations.length - 1] === '=') {\n              if (keypad.calcOperations.length < 2) { return; }\n              keypad.calcOperations.pop();\n              var val1 = keypad.calcOperations[keypad.calcOperations.length - 2];\n              var val2 = keypad.calcOperations[keypad.calcOperations.length - 1];\n              keypad.calcOperations.push(val1);\n              keypad.calcOperations.push(val2);\n            } else {\n              keypad.calcOperations.push(keypad.value);\n            }\n            keypad.calcOperations.push('=');\n            calc();\n          } else if (['-', '+', '×', '÷', '='].indexOf(lastOperation) >= 0) {\n            if (lastOperation === '=') {\n              keypad.calcOperations = [keypad.value, value];\n            }\n            if (['-', '+', '×', '÷'].indexOf(lastOperation) >= 0) {\n              if (keypad.lastWasNumber) {\n                if (['-', '+'].indexOf(lastOperation) >= 0 && ['×', '÷'].indexOf(value) >= 0) {\n                  keypad.calcOperations.push(keypad.value);\n                  keypad.calcOperations.push(value);\n                } else {\n                  keypad.calcOperations.push(keypad.value);\n                  keypad.calcOperations.push(value);\n                  calc();\n                }\n              } else {\n                keypad.calcOperations[keypad.calcOperations.length - 1] = value;\n              }\n            }\n          } else {\n            keypad.calcOperations.push(keypad.value);\n            keypad.calcOperations.push(value);\n            calc();\n          }\n          keypad.lastWasNumber = false;\n        }\n      }\n      if (value !== invert && value !== perc) { keypad.calcValues.push(value); }\n    };\n    Keypad.prototype.formatValue = function formatValue (value) {\n      var keypad = this;\n      if (keypad.params.formatValue) { return keypad.params.formatValue.call(keypad, value); }\n      return value;\n    };\n    Keypad.prototype.setValue = function setValue (value) {\n      var keypad = this;\n      keypad.updateValue(value);\n    };\n    Keypad.prototype.getValue = function getValue () {\n      var keypad = this;\n      return keypad.value;\n    };\n    Keypad.prototype.updateValue = function updateValue (newValue) {\n      var keypad = this;\n      keypad.value = newValue;\n      if (keypad.params.valueMaxLength && keypad.value.length > keypad.params.valueMaxLength) {\n        keypad.value = keypad.value.substring(0, keypad.params.valueMaxLength);\n      }\n      if (keypad.$inputEl && keypad.$inputEl.length > 0) {\n        keypad.$inputEl.val(keypad.formatValue(keypad.value));\n        keypad.$inputEl.trigger('change');\n      }\n      keypad.emit('local::change keypadChange', keypad, keypad.value);\n    };\n    Keypad.prototype.renderButtons = function renderButtons () {\n      var keypad = this;\n      var buttonsHTML = '';\n      var buttonClass;\n      var button;\n      for (var i = 0; i < keypad.params.buttons.length; i += 1) {\n        button = keypad.params.buttons[i];\n        buttonClass = 'keypad-button';\n        if (button.dark) { buttonClass += ' keypad-button-dark'; }\n        if (button.cssClass) { buttonClass += \" \" + (button.cssClass); }\n        buttonsHTML += \"<span class=\\\"\" + buttonClass + \"\\\">\" + (button.html || '') + \"</span>\";\n      }\n      return buttonsHTML;\n    };\n    Keypad.prototype.renderToolbar = function renderToolbar () {\n      var keypad = this;\n      if (keypad.params.renderToolbar) { return keypad.params.renderToolbar.call(keypad, keypad); }\n\n      var toolbarHtml = \"\\n        <div class=\\\"toolbar\\\">\\n          <div class=\\\"toolbar-inner\\\">\\n            <div class=\\\"left\\\"></div>\\n            <div class=\\\"right\\\">\\n              <a href=\\\"#\\\" class=\\\"link sheet-close popover-close\\\">\" + (keypad.params.toolbarCloseText) + \"</a>\\n            </div>\\n          </div>\\n        </div>\\n      \";\n      return toolbarHtml.trim();\n    };\n    Keypad.prototype.renderSheet = function renderSheet () {\n      var keypad = this;\n      if (keypad.params.renderSheet) { return keypad.params.renderSheet.call(keypad, keypad); }\n      var ref = keypad.params;\n      var cssClass = ref.cssClass;\n      var toolbar = ref.toolbar;\n\n      var sheetHtml = \"\\n        <div class=\\\"sheet-modal keypad keypad-sheet keypad-type-\" + (keypad.params.type) + \" \" + (cssClass || '') + \"\\\">\\n          \" + (toolbar ? keypad.renderToolbar() : '') + \"\\n          <div class=\\\"sheet-modal-inner keypad-buttons\\\">\\n            \" + (keypad.renderButtons()) + \"\\n          </div>\\n        </div>\\n      \";\n\n      return sheetHtml;\n    };\n    Keypad.prototype.renderPopover = function renderPopover () {\n      var keypad = this;\n      if (keypad.params.renderPopover) { return keypad.params.renderPopover.call(keypad, keypad); }\n      var ref = keypad.params;\n      var cssClass = ref.cssClass;\n      var toolbar = ref.toolbar;\n      var popoverHtml = (\"\\n        <div class=\\\"popover keypad-popover\\\">\\n          <div class=\\\"popover-inner\\\">\\n            <div class=\\\"keypad keypad-type-\" + (keypad.params.type) + \" \" + (cssClass || '') + \"\\\">\\n              \" + (toolbar ? keypad.renderToolbar() : '') + \"\\n              <div class=\\\"keypad-buttons\\\">\\n                \" + (keypad.renderButtons()) + \"\\n              </div>\\n            </div>\\n          </div>\\n        </div>\\n      \").trim();\n\n      return popoverHtml;\n    };\n    Keypad.prototype.renderInline = function renderInline () {\n      var keypad = this;\n      if (keypad.params.renderInline) { return keypad.params.renderInline.call(keypad, keypad); }\n      var ref = keypad.params;\n      var cssClass = ref.cssClass;\n      var toolbar = ref.toolbar;\n\n      var inlineHtml = \"\\n        <div class=\\\"keypad keypad-inline keypad-type-\" + (keypad.params.type) + \" \" + (cssClass || '') + \"\\\">\\n          \" + (toolbar ? keypad.renderToolbar() : '') + \"\\n          <div class=\\\"keypad-buttons\\\">\\n            \" + (keypad.renderButtons()) + \"\\n          </div>\\n        </div>\\n      \";\n\n      return inlineHtml;\n    };\n    Keypad.prototype.render = function render () {\n      var keypad = this;\n      var params = keypad.params;\n      if (params.render) { return params.render.call(keypad); }\n      if (!keypad.inline) {\n        var modalType = params.openIn;\n        if (modalType === 'auto') { modalType = keypad.isPopover() ? 'popover' : 'sheet'; }\n\n        if (modalType === 'popover') { return keypad.renderPopover(); }\n        else if (modalType === 'sheet') { return keypad.renderSheet(); }\n      }\n      return keypad.renderInline();\n    };\n\n    Keypad.prototype.onOpen = function onOpen () {\n      var keypad = this;\n      var initialized = keypad.initialized;\n      var $el = keypad.$el;\n      var app = keypad.app;\n      var $inputEl = keypad.$inputEl;\n      var inline = keypad.inline;\n      var value = keypad.value;\n      var params = keypad.params;\n      keypad.opened = true;\n\n      // Init main events\n      keypad.attachKeypadEvents();\n\n      // Set value\n      if (!initialized) {\n        if (value) { keypad.setValue(value); }\n        else if (params.value) {\n          keypad.setValue(params.value);\n        }\n      } else if (value) {\n        keypad.setValue(value);\n      }\n\n      // Extra focus\n      if (!inline && $inputEl.length && app.theme === 'md') {\n        $inputEl.trigger('focus');\n      }\n\n      keypad.initialized = true;\n\n      // Trigger events\n      if ($el) {\n        $el.trigger('keypad:open', keypad);\n      }\n      if ($inputEl) {\n        $inputEl.trigger('keypad:open', keypad);\n      }\n      keypad.emit('local::open keypadOpen', keypad);\n    };\n    Keypad.prototype.onOpened = function onOpened () {\n      var keypad = this;\n      if (keypad.$el) {\n        keypad.$el.trigger('keypad:opened', keypad);\n      }\n      if (keypad.$inputEl) {\n        keypad.$inputEl.trigger('keypad:opened', keypad);\n      }\n      keypad.emit('local::opened keypadOpened', keypad);\n    };\n    Keypad.prototype.onClose = function onClose () {\n      var keypad = this;\n      var app = keypad.app;\n\n      if (keypad.$inputEl && app.theme === 'md') {\n        keypad.$inputEl.trigger('blur');\n      }\n      if (keypad.detachKeypadEvents) {\n        keypad.detachKeypadEvents();\n      }\n\n      if (keypad.$el) {\n        keypad.$el.trigger('keypad:close', keypad);\n      }\n      if (keypad.$inputEl) {\n        keypad.$inputEl.trigger('keypad:close', keypad);\n      }\n      keypad.emit('local::close keypadClose', keypad);\n    };\n    Keypad.prototype.onClosed = function onClosed () {\n      var keypad = this;\n      keypad.opened = false;\n\n      if (!keypad.inline) {\n        keypad.app.utils.nextTick(function () {\n          if (keypad.modal && keypad.modal.el && keypad.modal.destroy) {\n            if (!keypad.params.routableModals) {\n              keypad.modal.destroy();\n            }\n          }\n          delete keypad.modal;\n        });\n      }\n      if (keypad.$el) {\n        keypad.$el.trigger('keypad:closed', keypad);\n      }\n      if (keypad.$inputEl) {\n        keypad.$inputEl.trigger('keypad:closed', keypad);\n      }\n      keypad.emit('local::closed keypadClosed', keypad);\n    };\n    Keypad.prototype.open = function open () {\n      var obj;\n\n      var keypad = this;\n      var app = keypad.app;\n      var opened = keypad.opened;\n      var inline = keypad.inline;\n      var $inputEl = keypad.$inputEl;\n      var params = keypad.params;\n      if (opened) { return; }\n\n      if (inline) {\n        keypad.$el = app.$(keypad.render());\n        keypad.$el[0].f7Keypad = keypad;\n        keypad.$containerEl.append(keypad.$el);\n        keypad.onOpen();\n        keypad.onOpened();\n        return;\n      }\n      var modalType = params.openIn;\n      if (modalType === 'auto') {\n        modalType = keypad.isPopover() ? 'popover' : 'sheet';\n      }\n      var modalContent = keypad.render();\n\n      var modalParams = {\n        targetEl: $inputEl,\n        scrollToEl: keypad.params.scrollToInput ? $inputEl : undefined,\n        content: modalContent,\n        backdrop: modalType !== 'sheet',\n        on: {\n          open: function open() {\n            var modal = this;\n            keypad.modal = modal;\n            keypad.$el = modalType === 'popover' ? modal.$el.find('.keypad') : modal.$el;\n            keypad.$el[0].f7Keypad = keypad;\n            keypad.onOpen();\n          },\n          opened: function opened() { keypad.onOpened(); },\n          close: function close() { keypad.onClose(); },\n          closed: function closed() { keypad.onClosed(); },\n        },\n      };\n      if (keypad.params.routableModals) {\n        keypad.view.router.navigate({\n          url: keypad.url,\n          route: ( obj = {\n            path: keypad.url\n          }, obj[modalType] = modalParams, obj ),\n        });\n      } else {\n        keypad.modal = app[modalType].create(modalParams);\n        keypad.modal.open();\n      }\n    };\n    Keypad.prototype.close = function close () {\n      var keypad = this;\n      var opened = keypad.opened;\n      var inline = keypad.inline;\n      if (!opened) { return; }\n      if (inline) {\n        keypad.onClose();\n        keypad.onClosed();\n        return;\n      }\n\n      keypad.modal.close();\n\n      // In f7 v4 this casues a glitch that navigates the user back\n      // if (keypad.params.routableModals) {\n      //   keypad.view.router.back();\n      // } else {\n      //   keypad.modal.close();\n      // }\n    };\n    Keypad.prototype.init = function init () {\n      var keypad = this;\n      keypad.initInput();\n\n      if (keypad.inline) {\n        keypad.open();\n        keypad.emit('local::init keypadInit', keypad);\n        return;\n      }\n\n      if (!keypad.initialized && keypad.params.value) {\n        keypad.setValue(keypad.params.value);\n      }\n\n      // Attach input Events\n      if (keypad.$inputEl) {\n        keypad.attachInputEvents();\n      }\n      if (keypad.params.closeByOutsideClick) {\n        keypad.attachHtmlEvents();\n      }\n      keypad.emit('local::init keypadInit', keypad);\n    };\n    Keypad.prototype.destroy = function destroy () {\n      var keypad = this;\n      if (keypad.destroyed) { return; }\n      var $el = keypad.$el;\n      keypad.emit('local::beforeDestroy keypadBeforeDestroy', keypad);\n      if ($el) { $el.trigger('keypad:beforedestroy', keypad); }\n\n      keypad.close();\n\n      // Detach Events\n      if (keypad.$inputEl) {\n        keypad.detachInputEvents();\n      }\n      if (keypad.params.closeByOutsideClick) {\n        keypad.detachHtmlEvents();\n      }\n\n      if ($el && $el.length) { delete keypad.$el[0].f7Keypad; }\n      keypad.app.utils.deleteProps(keypad);\n      keypad.destroyed = true;\n    };\n\n    return Keypad;\n  }(Framework7Class));\n};\n\nvar Keypad;\nvar framework7_keypad = {\n  name: 'keypad',\n  install: function install() {\n    var Framework7 = this;\n    Keypad = KeypadClassConstructor(Framework7.Class);\n    Framework7.Keypad = Keypad;\n  },\n  params: {\n    keypad: {\n      type: 'numpad', // or 'calculator' or 'custom',\n      openIn: 'auto', // or 'popover' or 'sheet'\n      inputEl: null,\n      containerEl: null,\n      value: null,\n      valueMaxLength: null,\n      dotButton: true,\n      dotCharacter: '.',\n      buttons: [],\n      closeByOutsideClick: true,\n      scrollToInput: true,\n      inputReadOnly: true,\n      onlyInPopover: false,\n      cssClass: null,\n      toolbar: true,\n      toolbarCloseText: 'Done',\n      routableModals: true,\n      view: null,\n      url: 'select/',\n      renderToolbar: null,\n      renderPopover: null,\n      renderSheet: null,\n      renderInline: null,\n      render: null,\n    },\n  },\n  create: function create() {\n    var app = this;\n    var $ = app.$;\n    app.keypad = {\n      create: function create(params) {\n        return new Keypad(app, params);\n      },\n      get: function get(el) {\n        if ( el === void 0 ) el = '.keypad';\n\n        if (el instanceof Keypad) { return el; }\n        var $el = $(el);\n        if ($el.length === 0) { return undefined; }\n        return $el[0].f7Keypad;\n      },\n      destroy: function destroy(el) {\n        if ( el === void 0 ) el = '.keypad';\n\n        var instance = app.keypad.get(el);\n        if (instance && instance.destroy) { return instance.destroy(); }\n        return undefined;\n      },\n      close: function close(el) {\n        if ( el === void 0 ) el = '.keypad';\n\n        var $el = $(el);\n        if ($el.length === 0) { return; }\n        var keypad = $el[0].f7Keypad;\n        if (!keypad || (keypad && !keypad.opened)) { return; }\n        keypad.close();\n      },\n    };\n  },\n  on: {\n    pageInit: function pageInit(page) {\n      var $ = page.app.$;\n      var app = page.app;\n      page.$el.find('input[type=\"numpad\"], input[type=\"calculator\"]').each(function (index, inputEl) {\n        var $inputEl = $(inputEl);\n        var params = {\n          inputEl: inputEl,\n          type: $inputEl.attr('type'),\n          value: $inputEl.val() || 0,\n        };\n        if ($inputEl.attr('maxlength')) { params.valueMaxLength = $inputEl.attr('maxlength'); }\n        app.keypad.create(app.utils.extend(params, $inputEl.dataset()));\n      });\n    },\n    pageBeforeRemove: function pageBeforeRemove(page) {\n      page.$el.find('input[type=\"numpad\"], input[type=\"calculator\"]').each(function (index, inputEl) {\n        page.app.keypad.destroy(inputEl);\n      });\n    },\n  },\n};\n\nreturn framework7_keypad;\n\n})));\n"]}